# Dev Container Features

This repository provides a small set of Dev Container Features for AI tooling and developer ergonomics.

## Features

| Feature | Description | Min Node.js |
|---------|-------------|-------------|
| `node` | Installs Node.js via nvm | - |
| `claude-code` | Anthropic's Claude Code CLI | 18+ |
| `opencode` | OpenCode AI terminal agent | 18+ |
| `gemini-cli` | Google's Gemini CLI | 20+ |
| `bmad-method` | BMad Agile AI framework | 20+ |
| `codex` | OpenAI's Codex CLI | 22+ |
| `nerd-font` | Nerd Fonts (Meslo, etc.) | - |

## Node.js Version Requirements

The `node` feature defaults to **v22**, which satisfies all feature requirements:

```
node (default: 22)
    ├── codex (requires 22+) ✅
    ├── bmad-method (requires 20+) ✅
    ├── gemini-cli (requires 20+) ✅
    ├── claude-code (requires 18+) ✅
    └── opencode (requires 18+) ✅
```

Each feature validates its minimum Node.js version and fails with a helpful error if not met.

## Supported Base Images

Debian/Ubuntu only (scripts rely on `apt-get`). Other distros are not supported yet.

## Usage

### From GitHub Container Registry (recommended)

```json
{
  "features": {
    "ghcr.io/ctrlcarlitos/devcontainer-features/node:1": { "version": "22" },
    "ghcr.io/ctrlcarlitos/devcontainer-features/claude-code:1": {},
    "ghcr.io/ctrlcarlitos/devcontainer-features/codex:1": {},
    "ghcr.io/ctrlcarlitos/devcontainer-features/nerd-font:1": { "fonts": "Meslo,FiraCode" }
  }
}
```

### Local Development

```json
{
  "features": {
    "./src/node": { "version": "22" },
    "./src/claude-code": { "version": "latest" }
  }
}
```

## Testing

Run scenario tests with the Dev Containers CLI:

```bash
npm install -g @devcontainers/cli
devcontainer features test --skip-autogenerated --project-folder .
```

## CI/CD

| Workflow | Trigger | Description |
|----------|---------|-------------|
| `test.yml` | Push to main, PRs | Runs feature tests |
| `publish.yml` | Tags `v*` | Publishes to GHCR |
| `auto-update.yml` | Daily 7AM UTC | Checks for upstream updates |

## License

MIT
