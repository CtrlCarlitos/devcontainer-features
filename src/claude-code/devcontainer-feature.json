{
    "id": "claude-code",
    "version": "1.1.0",
    "name": "Claude Code",
    "documentationURL": "https://github.com/CtrlCarlitos/devcontainer-features/tree/main/src/claude-code",
    "description": "Installs Claude Code AI coding assistant with headless mode and MCP server support. Uses the native installer (recommended by Anthropic).",
    "options": {
        "version": {
            "type": "string",
            "default": "2.1.37",
            "description": "Claude Code version to install (e.g., 'latest', '1.0.58')"
        },
        "enableMcpServer": {
            "type": "boolean",
            "default": false,
            "description": "Configure Claude Code to be available as an MCP server for other agents"
        },
        "authMethod": {
            "type": "string",
            "enum": [
                "api-key",
                "oauth",
                "none"
            ],
            "default": "none",
            "description": "Preferred authentication method. 'api-key' uses ANTHROPIC_API_KEY env var, 'oauth' requires browser"
        },
        "oauthPort": {
            "type": "string",
            "default": "52780",
            "description": "Port for OAuth callback server (for SSH port forwarding when using browser auth)"
        },
        "skipPermissions": {
            "type": "boolean",
            "default": false,
            "description": "Run initial setup with --dangerously-skip-permissions for headless environments"
        }
    },
    "customizations": {
        "vscode": {
            "settings": {
                "remote.portsAttributes": {
                    "52780": {
                        "label": "Claude Code OAuth",
                        "onAutoForward": "silent"
                    }
                }
            }
        }
    },
    "installsAfter": [
        "ghcr.io/devcontainers/features/common-utils"
    ]
}
